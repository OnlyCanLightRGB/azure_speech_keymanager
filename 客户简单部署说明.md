# Azure Speech Key Manager å®¢æˆ·éƒ¨ç½²è¯´æ˜

## ğŸš€ ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

### å‰ææ¡ä»¶
- å·²å®‰è£… Docker å’Œ Docker Compose
- ç«¯å£ 3000 å’Œ 3019 æœªè¢«å ç”¨

### éƒ¨ç½²æ­¥éª¤

1. **è·å–ä»£ç **
   ```bash
   git pull
   ```

2. **ä¸€é”®å¯åŠ¨**
   ```bash
   docker-compose build && docker-compose up -d
   ```

3. **éªŒè¯éƒ¨ç½²**
   - å‰ç«¯ç•Œé¢ï¼šhttp://localhost:3000
   - åç«¯APIï¼šhttp://localhost:3019/api/health

### å°±è¿™ä¹ˆç®€å•ï¼ğŸ‰

---

## ğŸ“‹ éƒ¨ç½²è¯´æ˜

### âœ… å·²è‡ªåŠ¨å¤„ç†çš„é…ç½®
- âœ… æ•°æ®åº“åˆå§‹åŒ–ï¼ˆMySQL 5.7ï¼‰
- âœ… Redisç¼“å­˜é…ç½®
- âœ… æ‰€æœ‰å¿…éœ€çš„ç›®å½•åˆ›å»º
- âœ… ç¯å¢ƒå˜é‡é…ç½®
- âœ… æœåŠ¡å¥åº·æ£€æŸ¥
- âœ… å­—ç¬¦é›†ç¼–ç ï¼ˆUTF-8æ”¯æŒä¸­æ–‡ï¼‰
- âœ… å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨

### ğŸ“ è‡ªåŠ¨åˆ›å»ºçš„Dockerå·
- `mysql_azkm_data` - æ•°æ®åº“æ•°æ®æŒä¹…åŒ–
- `redis_azkm_data` - Redisæ•°æ®æŒä¹…åŒ–  
- `app_logs` - åº”ç”¨æ—¥å¿—
- `app_uploads` - æ–‡ä»¶ä¸Šä¼ 
- `app_backups` - æ•°æ®åº“å¤‡ä»½

### ğŸ”§ å¯é€‰é…ç½®ï¼ˆä¸å½±å“åŸºæœ¬åŠŸèƒ½ï¼‰
å¦‚éœ€è¦ä»¥ä¸‹åŠŸèƒ½ï¼Œå¯ç¼–è¾‘ `.env.docker` æ–‡ä»¶ï¼š

```bash
# Azureè´¦å•æŸ¥è¯¢åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
# AZURE_CLIENT_ID=your_client_id
# AZURE_CLIENT_SECRET=your_client_secret  
# AZURE_TENANT_ID=your_tenant_id
# AZURE_SUBSCRIPTION_ID=your_subscription_id

# é£ä¹¦é€šçŸ¥åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
# FEISHU_WEBHOOK_URL=your_webhook_url
# TRANSLATION_FEISHU_WEBHOOK_URL=your_translation_webhook_url
```

---

## ğŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs app

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# å®Œå…¨é‡æ–°éƒ¨ç½²
docker-compose down -v && docker-compose build && docker-compose up -d
```

---

## ğŸ” æ•…éšœæ’é™¤

### ç«¯å£å ç”¨é—®é¢˜
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000
lsof -i :3019

# ä¿®æ”¹ç«¯å£ï¼ˆå¦‚éœ€è¦ï¼‰
# ç¼–è¾‘ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„
```

### æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs app --tail 50

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:3019/api/health
```

### æ•°æ®åº“é—®é¢˜
```bash
# è¿›å…¥æ•°æ®åº“å®¹å™¨
docker-compose exec mysql_azkm mysql -u root -prootpassword azure_speech_keymanager

# æ£€æŸ¥è¡¨ç»“æ„
SHOW TABLES;
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. é”™è¯¯æ—¥å¿—ï¼š`docker-compose logs app --tail 100`
2. æœåŠ¡çŠ¶æ€ï¼š`docker-compose ps`
3. ç³»ç»Ÿä¿¡æ¯ï¼š`docker --version && docker-compose --version`

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½éªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯æ ¸å¿ƒåŠŸèƒ½ï¼š

1. **è®¿é—®å‰ç«¯ç•Œé¢**ï¼šhttp://localhost:3000
2. **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:3019/api/health
3. **ä¸Šä¼ Azureå¯†é’¥æ–‡ä»¶**æµ‹è¯•è¯­éŸ³è½¬æ–‡å­—åŠŸèƒ½
4. **æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—**ç¡®è®¤å®šæ—¶ä»»åŠ¡æ­£å¸¸è¿è¡Œ

ç³»ç»Ÿå·²é…ç½®ä¸ºç”Ÿäº§ç¯å¢ƒï¼Œå…·å¤‡å®Œæ•´çš„é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•å’Œè‡ªåŠ¨æ¢å¤åŠŸèƒ½ã€‚
